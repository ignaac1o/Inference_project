---
title: "Inference_project"
author: Ignacio Almod√≥ar & Wuan
output: pdf_document
---


\newpage

# 1. Introduction 

## 1.1 Description of the project and motivation. 

## 1.2 Description of the data set

## 1.3 Population of our sample size 

## 1.4 Description of the variables


\newpage

# 2. Model Selection

```{r,echo=FALSE}
library(readr)
data=read.csv2("EV_DATASET_woNA.csv",dec = ",")
```


## 2.1 Pobability distribuction of our continuous random variable "Price in Germany"

In order to get a quick view of how our variable is distributed, we have to plot it. A good way to view it is by plotting a histogram of the variable.
```{r,echo=FALSE}
EURprice=data$PriceinGermany
```
```{r}
hist(EURprice)
```

First of all, if we want to model our variable we have to make sure that our variable is normally distributed. By plotting directly our variable that contains the price in EUR for each car in Germany, we can see that it is asymmetric, which means that it violates the assumptions of linear regression.

In order to transform our variable into a normally distributed one, we can apply logarithms to it. This way we make sure that our variable is normally distributed and we can model it with linear regression.

```{r}
pricelog=log(data$PriceinGermany)
hist(pricelog,prob=TRUE)
```

## 2.2 Estimation of model parameters.

Analyzing these histograms we can assume that our random variable follows a gamma distribution $\Gamma(\alpha,\lambda)$ with parameters:

- Shape $k$, $\alpha=k$
- Scale $\theta$, $\lambda=\frac{1}{\theta}$ 

As we want to estimate our model parameters $\hat{\alpha}$ and $\hat{\lambda}$, we are going to use the method of moments in order estimate it.

The method of moments consists in leveling population moments and sample moments in order to get an equation or system of equations from where to get our wanted parameters.

For a gamma distribution, we get the following equations:

- $E[x]=\frac{1}{n}\sum_{i=0}^n x=\overline X$ for the fist population moment
- $E[x^2]=\frac{1}{n}\sum_{i=0}^n x_{^2}$ for the second population moment 

As we know that $E[x]=\frac{\alpha}{\lambda}$ for a Gamma distribution, from the first function we get that:

$\alpha=\overline X\lambda$

Replacing $\alpha$ on the second equation and simplifying it, we obtain:

$\hat\lambda= \frac{\overline X}{\frac{1}{n}\sum_{i=0}^n x_{i}^2 - \overline{X}^2}$

Whereas, using $\alpha=\overline X\lambda$, we get:

$\hat\alpha=\overline X\hat\lambda=\frac{\overline X^2}{\frac{1}{n}\sum_{i=0}^n x_{i}^2 - \overline{X}^2}$

Using these results we can calculate our estimators using R. Running the code above we can say that our variable "Price in Germany" follows a gamma distribution $\Gamma(\hat\alpha,\hat\lambda)$ with parameters $\hat\alpha=569.5397$ and $\hat\lambda=52.419$

```{r}
a=0
for(i in 1:length(pricelog)){
  a=a+pricelog[i]^2
}

hatlambda=(mean(pricelog))/((a/length(pricelog))-mean(pricelog)^2)
hatalpha=hatlambda*mean(pricelog)

x=1:length(pricelog)
hist(pricelog,prob=TRUE)
r <- seq(min(pricelog), max(pricelog), length = 177)
f <- dgamma(r, hatalpha, hatlambda)
lines(r, f, col = "red", lwd = 2)

```


\newpage

# 3. One-sample Inference

## 3.1 Estimators for our population mean

## 3.2 Estimation of the errors of our estimators

## 3.3 Confidence interval of 95% for our population mean

## 3.4 Estimation of the proportion of units in the population that belongs to the category slected

## 3.5 Variance of our estimator of proportion

## 3.6 Population proportion with 95% of confidence interval


\newpage